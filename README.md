# 慕课网《玩转算法系列--图论精讲》笔记

明确变量的语义！！！

## 忘记的概念

### 图的基本表示

- 联通分量（2-2 8:13）
- 树是一种无环图（2-2 10:26）
- 联通的无环图是树（2-2 11:27）
- 联通图的生成树包含所有顶点（2-2 12:38）
- 通过删边可以使原本的联通图不在联通（2-2 14:40）
- 只有联通图才有生成树（2-2 15:20）
- 邻接表空间复杂度表示 O(V+E)，不能用 O(E)，当 E=0 的时候就不对了（2-7 05:11）
- 邻接表查询两点是否相邻优化：使用 HashSet（哈希表） 或者 TreeSet（红黑树）（2-7 13:35）
- 由于 Golang 中没有内置的 TreeSet 红黑树，这里就使用 map （哈希表）了 :/
- 可以使用深度优先遍历
    - 验证图是否联通、是否有环
    - 二分图检测
    - 寻找图中的桥
    - 寻找图中的割点
    - 哈密尔顿路径
    - 拓扑排序

---

### 深度优先遍历的应用

1. 求联通分量的个数 (4-1)

```text
visited[0 .. V] = false;

for (int v = 0; v < V; v ++) {
    if (!visited[v]) {
        dfs(v);
        // connected component
        cccount ++
    }
}
```

2. 求联通分量中包含的顶点 (4-2)

`visited` 数组记录每一个联通分量的 ID ，属于同一个联通分量的 vertex 有相同的 ID

```text
visited[0 .. V] = -1;

for (int v = 0; v < V; v ++) {
    if (!visited[v]) { // set ID
        dfs(v, ccid);
        ccid ++
    }
}
```

3. 求两个点是否在同一个联通分量重 (4-3)
4. 求两点之间的路径 (4-4, 单源路径问题)
5. 二分图检测
    - 二分图：定点 V 可以分成不想交的两个部分，所有边的两个端点隶属于不同部分

```text
0 - 1
0 - 2
3 - 1
3 - 2
4 - 1
6 - 2
6 - 5
```

---

### 关于广度优先遍历

使用广度优先遍历求得的路径即为最短路径，但是图必须为**无权图**

BFS 和 DSF 拥有一套相似的逻辑框架

```text
visited[0 ... V-1] = false

for (int v = 0; v < V; v ++) {
    if (!visited[v]) {
        search(v)
    }
}

func search(int s) {
    x.add(s)
    visited[s] = true
    while(!x.isEmpty()) {
        int v = x.remove();
        
        for (int w : G.adj(v)) {
            if (!visited[w]) {
                x.add(w)
                visited[w] = true
            }
        }

    }
}
```

---

## 第六章 floodfill

- [695](leetcode/l-695)
- [200](leetcode/l-200)
- [1020](leetcode/l-1020) 逆向思维，排除法
- [130](leetcode/l-130) 逆向思维，排除法
- [733](leetcode/l-733)   图像渲染 
- [1034](leetcode/l-1034) 边框着色
- [529](leetcode/l-529) 扫雷
- [827](leetcode/l-827) 最大人工岛 两步法解题

---

## 第七章 BFS

抽象状态和状态转移

- [1091](leetcode/l-1091) 二进制矩阵中的最短路径
- [752](leetcode/l-752)  打开转盘锁，使用图论建模
- [7-4一道智力题](traverse_graph/7-4-IQ-test) 倒水问题
- [7-4二道智力题](traverse_graph/7-4-IQ-test) 农夫运狼羊菜
- [773](leetcode/l-773) 滑动谜题  O(n!) ->  O(V + E) = O(V + 4V) = O(V) ，图总共有 n! 种可能 (\>O(2^n))

---

## 第八章 桥、割点、图的遍历树

桥：对于无向图，如果删除了一条边，整个图联通分量数量变化，则这条边称为桥(Bridge)，下图 3-5 的边

cut edge

```text
0 -- 2
|    |
1 -- 3
     |
4 -- 5
|    |
6 ---+
```

应用：交通系统、社交网络。一个图中可以有多个桥，一棵树的所有边都是桥

寻找桥的算法，使用 DFS

解决图论问题一般都是需要遍历图，只不过是记录不同的信息

### 判断桥

如何判断 v-w 是不是桥？通过 w ，能否从另外一条路回到 v 或者 v 之前的定点

1. 对于每一个定点，记录 DFS 的顺序，ord[v] 表示定点 v 在 DFS 中的访问顺序

```text
0 -- 2
|    |
1 -- 3
     |
4 -- 5
|    |
6 ---+
```

- ord[0] = 0
- ord[1] = 1
- ord[3] = 2
- ord[2] = 3
- ord[5] = 4
- ord[4] = 5
- ord[6] = 6

2. 对于每一个顶点,记录能到达的最小 ord

对于定点 2

- low[2] = 0
- low[3] = 0
- low[1] = 0

相邻节点所能到达的最小序号比当前节点小，则更新当前节点的 low 值

相邻节点的所能到达的最小序号比当前节点需要要大，为桥

[详细代码](cpt8-cut-edge-points/bridge.go)

---

### DSF 和 BFS 的遍历树

DSF 遍历树，图中非遍历树的边可以指向自己祖先的节点，而 BFS 遍历树中，非遍历树的边两端的点不是祖先的关系

![](assets/DFS-tree.png)
![](assets/DFS-BFS-tree.png)

---

### 割点

对于无向图，如果删除了一个顶点，(顶点邻边也删除)，整个图联通分量数量变化，则这个顶点称为割点 (Cut Points)

在无向联通图 G=(V,E)中: 若对于x∈V， 从图中删去节点x以及所有与x关联的边之后，G分裂成两个或两个以上不相连的子图，则称x为G的割点

下图，3 与 5 为割点

```text
0 -- 2
|    |
1 -- 3
     |
4 -- 5
|    |
6 ---+
```
